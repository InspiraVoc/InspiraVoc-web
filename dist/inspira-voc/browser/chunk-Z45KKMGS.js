import{a as W}from"./chunk-RXOBX5UX.js";import{a as B}from"./chunk-XEWQXH6G.js";import{a as k,d as T,g as j,o as F}from"./chunk-6SHF5PKH.js";import{$a as M,Bb as x,Ca as S,Cb as C,Db as f,Fb as O,Ga as l,Ha as b,Pb as D,Wa as v,_a as u,ac as V,bc as A,ca as w,cb as n,db as t,eb as _,ec as I,gb as h,jb as g,ka as p,la as m,lb as s,ob as E,xb as o,yb as y,zb as P}from"./chunk-4K5NKH7C.js";function z(c,a){if(c&1){let e=h();n(0,"div",6)(1,"div",7)(2,"p"),o(3),t(),n(4,"button",8),g("click",function(){p(e);let i=s();return m(i.cerrarAlerta())}),o(5,"Aceptar"),t()()()}if(c&2){let e=s();l(3),y(e.mensajeAlerta)}}function R(c,a){if(c&1&&(n(0,"div",12),_(1,"img",13),n(2,"div",14)(3,"h4"),o(4),t(),n(5,"p"),o(6),t(),n(7,"p"),o(8),t()()()),c&2){let e=a.$implicit;l(),E("alt",e.nombre),u("src",e.nombre.includes("Reuni\xF3n Orientador")?"assets/images/reunion.jpg":"assets/images/test.jpg",S),l(3),y(e.nombre),l(2),P("Duraci\xF3n: ",e.duracion,""),l(2),P("Precio: PEN ",e.precio,"")}}function U(c,a){if(c&1){let e=h();n(0,"div",9)(1,"h3"),o(2,"DETALLE DE COMPRA"),t(),n(3,"p"),o(4),t(),v(5,R,9,5,"div",10),n(6,"div",11)(7,"p"),o(8,"Subtotal:"),t(),n(9,"p"),o(10),t()(),n(11,"button",8),g("click",function(){p(e);let i=s();return m(i.cambiarPaso(2))}),o(12,"Informaci\xF3n de Compra"),t()()}if(c&2){let e=s();l(4),P("Tienes ",e.carritoItems.length," art\xEDculos en tu reserva"),l(),u("ngForOf",e.carritoItems),l(5),P("PEN ",e.totalBase,"")}}function L(c,a){if(c&1){let e=h();n(0,"div",15)(1,"h3"),o(2,"INFORMACI\xD3N DE COMPRA"),t(),n(3,"label"),o(4,"Nombre"),t(),n(5,"input",16),f("ngModelChange",function(i){p(e);let d=s();return C(d.envioDatos.nombre,i)||(d.envioDatos.nombre=i),m(i)}),t(),n(6,"label"),o(7,"Correo Electr\xF3nico"),t(),n(8,"input",17),f("ngModelChange",function(i){p(e);let d=s();return C(d.envioDatos.email,i)||(d.envioDatos.email=i),m(i)}),t(),n(9,"label"),o(10,"Pa\xEDs"),t(),n(11,"input",18),f("ngModelChange",function(i){p(e);let d=s();return C(d.envioDatos.pais,i)||(d.envioDatos.pais=i),m(i)}),t(),n(12,"label"),o(13,"Ciudad"),t(),n(14,"input",19),f("ngModelChange",function(i){p(e);let d=s();return C(d.envioDatos.ciudad,i)||(d.envioDatos.ciudad=i),m(i)}),t(),n(15,"label"),o(16,"C\xF3digo Postal"),t(),n(17,"input",20),f("ngModelChange",function(i){p(e);let d=s();return C(d.envioDatos.codigoPostal,i)||(d.envioDatos.codigoPostal=i),m(i)}),t(),n(18,"button",8),g("click",function(){p(e);let i=s();return m(i.cambiarPaso(1))}),o(19,"Volver al Carrito"),t(),n(20,"button",8),g("click",function(){p(e);let i=s();return m(i.cambiarPaso(3))}),o(21,"M\xE9todo de Pago"),t()()}if(c&2){let e=s();l(5),x("ngModel",e.envioDatos.nombre),l(3),x("ngModel",e.envioDatos.email),l(3),x("ngModel",e.envioDatos.pais),l(3),x("ngModel",e.envioDatos.ciudad),l(3),x("ngModel",e.envioDatos.codigoPostal)}}function G(c,a){c&1&&(n(0,"div")(1,"label"),o(2,"N\xFAmero de Tarjeta"),t(),_(3,"input",37),n(4,"label"),o(5,"Fecha de Expiraci\xF3n"),t(),_(6,"input",38),n(7,"label"),o(8,"CVV"),t(),_(9,"input",39),t())}function Y(c,a){c&1&&(n(0,"div")(1,"label"),o(2,"Correo Electr\xF3nico de PayPal"),t(),_(3,"input",40),t())}function q(c,a){if(c&1){let e=h();n(0,"div",21)(1,"div",22)(2,"h3"),o(3,"FORMAS DE PAGO"),t(),n(4,"div",23)(5,"input",24),g("click",function(){p(e);let i=s();return m(i.seleccionarMetodoPago("visa"))}),t(),n(6,"label",25),o(7," Pago con Tarjeta - Visa "),_(8,"img",26),t()(),n(9,"div",23)(10,"input",27),g("click",function(){p(e);let i=s();return m(i.seleccionarMetodoPago("mastercard"))}),t(),n(11,"label",28),o(12," MasterCard "),_(13,"img",29),t()(),n(14,"div",23)(15,"input",30),g("click",function(){p(e);let i=s();return m(i.seleccionarMetodoPago("paypal"))}),t(),n(16,"label",31),o(17," PayPal "),_(18,"img",32),t()()(),v(19,G,10,0,"div",33)(20,Y,4,0,"div",33),n(21,"div",34)(22,"label"),o(23,"C\xF3digo de Descuento"),t(),n(24,"input",35),f("ngModelChange",function(i){p(e);let d=s();return C(d.codigoDescuento,i)||(d.codigoDescuento=i),m(i)}),t(),n(25,"button",8),g("click",function(){p(e);let i=s();return m(i.aplicarDescuento())}),o(26,"Aplicar Descuento"),t()(),n(27,"div",36)(28,"p"),o(29,"Total a Pagar:"),t(),n(30,"p"),o(31),t()(),n(32,"button",8),g("click",function(){p(e);let i=s();return m(i.cambiarPaso(2))}),o(33,"Volver a Env\xEDo"),t(),n(34,"button",8),g("click",function(){p(e);let i=s();return m(i.placeOrder())}),o(35,"Pagar"),t()()}if(c&2){let e=s();l(19),u("ngIf",e.metodoPagoSeleccionado==="visa"||e.metodoPagoSeleccionado==="mastercard"),l(),u("ngIf",e.metodoPagoSeleccionado==="paypal"),l(4),x("ngModel",e.codigoDescuento),l(7),P("PEN ",e.totalConDescuento,"")}}var N=class c{constructor(a,e,r){this.authService=a;this.eventService=e;this.cdr=r}pasoActual=1;metodoPagoSeleccionado="";codigoDescuento="";totalBase=0;totalConDescuento=0;mensajeAlerta="";mostrarAlerta=!1;carritoItems=[];tarjeta={numero:"1234 5678 9876 5432",fechaExpiracion:"12/25",cvv:"123",saldo:100};envioDatos={pais:"",ciudad:"",codigoPostal:"",nombre:"",email:""};ngOnInit(){this.totalBase=this.calcularTotalBase(),this.totalConDescuento=this.totalBase,this.authService.currentUser$.subscribe(a=>{a&&(this.envioDatos.nombre=a.firstName,this.envioDatos.email=a.email)}),this.eventService.carritoItem$.subscribe(a=>{console.log("Actualizaci\xF3n de items en carrito:",a),this.carritoItems=a,this.totalBase=this.calcularTotalBase(),this.totalConDescuento=this.totalBase,this.cdr.detectChanges()})}calcularTotalBase(){return this.carritoItems.reduce((a,e)=>a+e.precio,0)}cambiarPaso(a){this.pasoActual=a}seleccionarMetodoPago(a){this.metodoPagoSeleccionado=a}aplicarDescuento(){this.codigoDescuento==="GRUPO30"?(this.totalConDescuento=this.totalBase*.7,this.mensajeAlerta="Descuento de 30% aplicado para estudiantes en grupo"):this.codigoDescuento==="USUARIO15"?(this.totalConDescuento=this.totalBase*.85,this.mensajeAlerta="Descuento de 15% aplicado para uso continuo"):(this.mensajeAlerta="C\xF3digo de descuento no v\xE1lido",this.totalConDescuento=this.totalBase),this.mostrarAlerta=!0}cerrarAlerta(){this.mostrarAlerta=!1}placeOrder(){this.totalConDescuento>this.tarjeta.saldo?(this.mensajeAlerta="Saldo insuficiente para realizar la compra",this.mostrarAlerta=!0):(this.tarjeta.saldo-=this.totalConDescuento,this.mensajeAlerta="Compra realizada con \xE9xito",this.mostrarAlerta=!0,this.vaciarCarrito(),this.cambiarPaso(1))}vaciarCarrito(){this.carritoItems=[],this.totalBase=0,this.totalConDescuento=0}static \u0275fac=function(e){return new(e||c)(b(B),b(W),b(D))};static \u0275cmp=w({type:c,selectors:[["app-pago"]],standalone:!0,features:[O],decls:12,vars:10,consts:[["class","alerta-flotante",4,"ngIf"],[1,"pago-container"],[1,"pasos-header"],["class","carrito-section",4,"ngIf"],["class","envio-section",4,"ngIf"],["class","pago-section",4,"ngIf"],[1,"alerta-flotante"],[1,"alerta-contenido"],[3,"click"],[1,"carrito-section"],["class","item",4,"ngFor","ngForOf"],[1,"subtotal"],[1,"item"],[1,"item-image",3,"src","alt"],[1,"item-details"],[1,"envio-section"],["type","text","placeholder","Tu Nombre","readonly","",3,"ngModelChange","ngModel"],["type","email","placeholder","tu@gmail.com","readonly","",3,"ngModelChange","ngModel"],["type","text","placeholder","Pa\xEDs",3,"ngModelChange","ngModel"],["type","text","placeholder","Ciudad",3,"ngModelChange","ngModel"],["type","text","placeholder","C\xF3digo Postal",3,"ngModelChange","ngModel"],[1,"pago-section"],[1,"metodo-pago-container"],[1,"opcion-pago"],["type","radio","id","tarjetaVisa","name","metodoPago",3,"click"],["for","tarjetaVisa"],["src","assets/images/Visa.jpg","alt","Visa",1,"icono"],["type","radio","id","tarjetaMaster","name","metodoPago",3,"click"],["for","tarjetaMaster"],["src","assets/images/Master.jpg","alt","MasterCard",1,"icono"],["type","radio","id","paypal","name","metodoPago",3,"click"],["for","paypal"],["src","assets/images/logopay.jpg","alt","PayPal",1,"icono"],[4,"ngIf"],[1,"codigo-descuento"],["type","text","placeholder","Ingresa tu c\xF3digo",3,"ngModelChange","ngModel"],[1,"total"],["type","text","placeholder","1234 5678 9876 5432"],["type","text","placeholder","MM/YY"],["type","text","placeholder","123"],["type","email","placeholder","email@paypal.com"]],template:function(e,r){e&1&&(v(0,z,6,1,"div",0),n(1,"div",1)(2,"div",2)(3,"span"),o(4,"1. Carrito"),t(),n(5,"span"),o(6,"2. Datos"),t(),n(7,"span"),o(8,"3. Pago"),t()(),v(9,U,13,3,"div",3)(10,L,22,5,"div",4)(11,q,36,4,"div",5),t()),e&2&&(u("ngIf",r.mostrarAlerta),l(3),M("active",r.pasoActual===1),l(2),M("active",r.pasoActual===2),l(2),M("active",r.pasoActual===3),l(2),u("ngIf",r.pasoActual===1),l(),u("ngIf",r.pasoActual===2),l(),u("ngIf",r.pasoActual===3))},dependencies:[I,V,A,F,k,T,j],styles:[".pago-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:20px;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;font-family:Arial,sans-serif}.pasos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:20px;font-weight:700;color:#666}.pasos-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;transition:all .3s ease}.pasos-header[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background-color:#d97102;color:#fff}.carrito-section[_ngcontent-%COMP%], .envio-section[_ngcontent-%COMP%], .pago-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.carrito-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .envio-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .pago-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#333;border-bottom:2px solid #d97102;padding-bottom:10px;margin-bottom:20px}.item[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:15px;border:1px solid #ddd;border-radius:10px;background-color:#f9f9f9;margin-bottom:10px}.item-image[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:10px;margin-right:15px;object-fit:cover}.item-details[_ngcontent-%COMP%]{color:#2b2b2b;font-family:Arial,sans-serif}.item-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em;color:#5c5c5c}.item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.2em;color:#d97102}.item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#555}.subtotal[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-weight:700;font-size:1.2em;color:#333;margin-top:15px}button[_ngcontent-%COMP%]{padding:12px;background-color:#d97102;color:#fff;border:none;border-radius:5px;font-weight:700;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#d97102}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:5px;width:100%;font-size:1em;margin-top:5px}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus{border-color:#d97102;outline:none}.metodo-pago-container[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:15px;border-radius:10px;border:1px solid #ddd;margin-bottom:20px}.metodo-pago-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px;font-size:1.3em;color:#333}.opcion-pago[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 0;border-bottom:1px solid #ddd}.opcion-pago[_ngcontent-%COMP%]:last-child{border-bottom:none}.opcion-pago[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:10px;accent-color:#d97102}.opcion-pago[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1em;color:#555}.icono[_ngcontent-%COMP%]{margin-left:8px;width:40px;height:auto}.total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.3em;font-weight:700;color:#333;padding:15px 0;border-top:2px solid #ddd;margin-top:20px}.alerta-flotante[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.alerta-contenido[_ngcontent-%COMP%]{background-color:#ffe5b4;color:#333;border:2px solid #d97102;border-radius:8px;padding:20px;text-align:center;width:300px;max-width:80%;box-shadow:0 4px 8px #0000004d}.alerta-contenido[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 15px;font-size:1.1em}.alerta-contenido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#d97102;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:700}.alerta-contenido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#c75e00}"]})};export{N as PagoComponent};
