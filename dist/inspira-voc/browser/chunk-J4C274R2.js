import{m as L,n as q}from"./chunk-IOV6ZOCI.js";import"./chunk-XAZLOLJU.js";import{d as k}from"./chunk-7VFEERG5.js";import{a as R}from"./chunk-XEWQXH6G.js";import{a as T,d as N,e as W,f as O,g as z,h as B,l as F,o as U,p as D}from"./chunk-6SHF5PKH.js";import{Ab as S,Bb as g,Ca as M,Cb as f,Db as x,Fb as V,Ga as a,Ha as y,Wa as b,_a as _,aa as v,bc as A,ca as E,cb as n,db as i,eb as h,ec as I,gb as P,jb as p,ka as d,la as c,lb as s,xb as r,yb as w,zb as C}from"./chunk-4K5NKH7C.js";function G(u,m){if(u&1){let e=P();n(0,"div",11)(1,"p"),r(2,"\xBFEst\xE1 seguro de eliminar su perfil?"),h(3,"br"),r(4,"Esta acci\xF3n es permanente."),i(),n(5,"button",8),p("click",function(){d(e);let t=s(2);return c(t.deteleUser())}),r(6,"S\xED"),i(),n(7,"button",8),p("click",function(){d(e);let t=s(2);return c(t.cancelDel())}),r(8,"No"),i()()}}function Z(u,m){if(u&1){let e=P();n(0,"div",5)(1,"h3"),r(2,"Perfil de Usuario"),i(),n(3,"p")(4,"strong"),r(5,"Nombre:"),i(),r(6),i(),n(7,"p")(8,"strong"),r(9,"Email:"),i(),r(10),i(),n(11,"p")(12,"strong"),r(13,"Tel\xE9fono:"),i(),r(14),i(),n(15,"p")(16,"strong"),r(17,"Rol:"),i(),r(18),i(),n(19,"div",7)(20,"button",8),p("click",function(){d(e);let t=s();return c(t.toggleEdit())}),r(21,"Editar"),i(),n(22,"button",9),p("click",function(){d(e);let t=s();return c(t.openConfirmationDialog())}),r(23,"Eliminar cuenta"),i(),b(24,G,9,0,"div",10),i()()}if(u&2){let e=s();a(6),S(" ",e.userProfile.firstName," ",e.userProfile.lastName,""),a(4),C(" ",e.userProfile.email,""),a(4),C(" ",e.userProfile.phone,""),a(4),C(" ",e.userProfile.role,""),a(6),_("ngIf",e.showConfirmation)}}function H(u,m){if(u&1){let e=P();n(0,"div",5)(1,"h3"),r(2,"Editar Perfil"),i(),n(3,"form",12),p("ngSubmit",function(){d(e);let t=s();return c(t.saveProfile())}),n(4,"label"),r(5," Nombre: "),n(6,"input",13),x("ngModelChange",function(t){d(e);let l=s();return f(l.userProfile.firstName,t)||(l.userProfile.firstName=t),c(t)}),i()(),n(7,"label"),r(8," Apellido: "),n(9,"input",14),x("ngModelChange",function(t){d(e);let l=s();return f(l.userProfile.lastName,t)||(l.userProfile.lastName=t),c(t)}),i()(),n(10,"label"),r(11," Email: "),n(12,"input",15),x("ngModelChange",function(t){d(e);let l=s();return f(l.userProfile.email,t)||(l.userProfile.email=t),c(t)}),i()(),n(13,"label"),r(14," Tel\xE9fono: "),n(15,"input",16),x("ngModelChange",function(t){d(e);let l=s();return f(l.userProfile.phone,t)||(l.userProfile.phone=t),c(t)}),i()(),n(16,"label"),r(17," Rol: "),n(18,"input",17),x("ngModelChange",function(t){d(e);let l=s();return f(l.userProfile.role,t)||(l.userProfile.role=t),c(t)}),i()(),n(19,"label"),r(20," Imagen de Perfil: "),n(21,"input",18),p("change",function(t){d(e);let l=s();return c(l.onFileSelected(t))}),i()(),n(22,"button",19),r(23,"Guardar"),i(),n(24,"button",20),p("click",function(){d(e);let t=s();return c(t.toggleEdit())}),r(25,"Cancelar"),i()()()}if(u&2){let e=s();a(6),g("ngModel",e.userProfile.firstName),a(3),g("ngModel",e.userProfile.lastName),a(3),g("ngModel",e.userProfile.email),a(3),g("ngModel",e.userProfile.phone),a(3),g("ngModel",e.userProfile.role)}}function J(u,m){if(u&1){let e=P();n(0,"div")(1,"div",21),h(2,"img",22),n(3,"p"),r(4),i()(),n(5,"div",21),h(6,"img",23),n(7,"p"),r(8),i()(),n(9,"div",21),h(10,"img",24),n(11,"p"),r(12),i()(),n(13,"button",8),p("click",function(){d(e);let t=s();return c(t.toggleEditPreferences())}),r(14,"Editar Preferencias"),i()()}if(u&2){let e=s();a(4),C("Intereses: ",e.interestsAux,""),a(4),C("Idioma: ",e.languageAux,""),a(4),C("Zona horaria: ",e.timezoneAux,"")}}function K(u,m){if(u&1){let e=P();n(0,"div")(1,"form",12),p("ngSubmit",function(){d(e);let t=s();return c(t.savePreferences())}),n(2,"label"),r(3," Intereses: "),n(4,"input",25),x("ngModelChange",function(t){d(e);let l=s();return f(l.interestsAux,t)||(l.interestsAux=t),c(t)}),i()(),n(5,"label"),r(6," Idioma: "),n(7,"input",26),x("ngModelChange",function(t){d(e);let l=s();return f(l.languageAux,t)||(l.languageAux=t),c(t)}),i()(),n(8,"label"),r(9," Zona horaria: "),n(10,"input",27),x("ngModelChange",function(t){d(e);let l=s();return f(l.timezoneAux,t)||(l.timezoneAux=t),c(t)}),i()(),n(11,"button",19),r(12,"Guardar Preferencias"),i(),n(13,"button",20),p("click",function(){d(e);let t=s();return c(t.toggleEditPreferences())}),r(14,"Cancelar"),i()()()}if(u&2){let e=s();a(4),g("ngModel",e.interestsAux),a(3),g("ngModel",e.languageAux),a(3),g("ngModel",e.timezoneAux)}}var j=class u{constructor(m){this.authService=m}userProfile={id:0,firstName:"",lastName:"",email:"",password:"",role:"",phone:"",preferences:{interests:"",language:"Espa\xF1ol",timezone:"UTC-5"}};snackBar=v(L);router=v(k);isEditing=!1;isEditingPreferences=!1;showConfirmation=!1;interestsAux=this.userProfile.preferences?.interests??"";languageAux=this.userProfile.preferences?.language??"";timezoneAux=this.userProfile.preferences?.timezone??"";ngOnInit(){let m=this.authService.getCurrentUser();m&&(this.userProfile=m,this.loadAuxPreferences())}loadAuxPreferences(){this.userProfile.preferences=this.userProfile.preferences||{interests:"",language:"",timezone:""},this.interestsAux=this.userProfile.preferences.interests,this.languageAux=this.userProfile.preferences.language,this.timezoneAux=this.userProfile.preferences.timezone}toggleEdit(){this.isEditing=!this.isEditing}deteleUser(){this.authService.deleteCurrentUser(),this.router.navigate(["/login"]),this.snackBar.open("Cuenta elimina con \xE9xito. Esperamos volver a verlo.","Cerrar",{duration:3e3,verticalPosition:"bottom",horizontalPosition:"center"})}toggleEditPreferences(){this.isEditingPreferences=!this.isEditingPreferences}saveProfile(){this.authService.updateProfile(this.userProfile),this.isEditing=!1}savePreferences(){this.userProfile.preferences?(this.userProfile.preferences.interests=this.interestsAux,this.userProfile.preferences.language=this.languageAux,this.userProfile.preferences.timezone=this.timezoneAux):this.userProfile.preferences={interests:this.interestsAux,language:this.languageAux,timezone:this.timezoneAux},this.authService.updateProfile(this.userProfile),this.isEditingPreferences=!1}onFileSelected(m){let e=m.target.files?.[0];if(e){let o=new FileReader;o.onload=()=>{this.userProfile.profileImage=o.result},o.readAsDataURL(e)}}openConfirmationDialog(){this.showConfirmation=!0}cancelDel(){this.showConfirmation=!1}static \u0275fac=function(e){return new(e||u)(y(R))};static \u0275cmp=E({type:u,selectors:[["app-cuenta"]],standalone:!0,features:[V],decls:19,vars:10,consts:[[1,"dashboard-container"],[1,"sidebar"],["alt","Foto de perfil",3,"src"],[1,"main-content"],["class","section-card",4,"ngIf"],[1,"section-card"],[4,"ngIf"],[1,"buttons-container"],[3,"click"],[1,"del-button",3,"click"],["class","confirmation-dialog",4,"ngIf"],[1,"confirmation-dialog"],[3,"ngSubmit"],["name","fName","required","",3,"ngModelChange","ngModel"],["name","lName","required","",3,"ngModelChange","ngModel"],["name","email","required","",3,"ngModelChange","ngModel"],["name","phone","required","",3,"ngModelChange","ngModel"],["name","role","required","",3,"ngModelChange","ngModel"],["type","file",3,"change"],["type","submit"],["type","button",1,"cancel-button",3,"click"],[1,"icon-section"],["src","public/assets/images/tecnologia.jpeg","alt","Icono","width","24"],["src","public/assets/images/espa\xF1ol.jpg","alt","Icono","width","24"],["src","public/assets/images/peru.png","alt","Icono","width","24"],["name","interestsAux","required","",3,"ngModelChange","ngModel"],["name","languageAux","required","",3,"ngModelChange","ngModel"],["name","timezoneAux","required","",3,"ngModelChange","ngModel"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1),h(2,"img",2),n(3,"h2"),r(4),i(),n(5,"p"),r(6),i(),n(7,"p"),r(8),i(),n(9,"p"),r(10),i()(),n(11,"div",3),b(12,Z,25,6,"div",4)(13,H,26,5,"div",4),n(14,"div",5)(15,"h3"),r(16,"Preferencias"),i(),b(17,J,15,3,"div",6)(18,K,15,3,"div",6),i()()()),e&2&&(a(2),_("src",o.userProfile.profileImage,M),a(2),S("",o.userProfile.firstName," ",o.userProfile.lastName,""),a(2),w(o.userProfile.email),a(2),w(o.userProfile.phone),a(2),w(o.userProfile.role),a(2),_("ngIf",!o.isEditing),a(),_("ngIf",o.isEditing),a(4),_("ngIf",!o.isEditingPreferences),a(),_("ngIf",o.isEditingPreferences))},dependencies:[I,A,U,B,T,N,W,F,z,O,D,q],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;gap:20px;font-family:Arial,sans-serif;background-color:#f5f6fa;padding:20px;border-radius:16px;box-shadow:0 4px 12px #0000001a}.sidebar[_ngcontent-%COMP%]{width:250px;background-color:#f0f4ff;border-radius:16px;padding:20px;display:flex;flex-direction:column;align-items:center;text-align:center;box-shadow:0 4px 10px #0000001a}.sidebar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;margin-bottom:15px}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em;color:#333;margin-bottom:5px}.sidebar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;margin:5px 0}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px}.section-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px;padding:20px;box-shadow:0 4px 10px #0000001a}.section-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#333;margin-bottom:15px}.icon-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;font-size:1.1em}.buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.5rem}button[_ngcontent-%COMP%]{padding:10px 20px;color:#fff;background-color:#3b82f6;border:none;border-radius:8px;cursor:pointer;font-weight:700}.del-button[_ngcontent-%COMP%]{background-color:red}button.cancel-button[_ngcontent-%COMP%]{background-color:#f60;margin-left:10px}label[_ngcontent-%COMP%]{display:block;margin:10px 0 5px;font-weight:700;color:#555}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:1px solid #ddd;border-radius:8px;background-color:#f0f2f5}.confirmation-dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #f0a500;border-radius:10px;padding:20px;text-align:center;box-shadow:0 4px 8px #0003;z-index:1000}"]})};export{j as CuentaComponent};
